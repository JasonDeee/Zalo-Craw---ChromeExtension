<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Zalo Crawler v1.2.0 - Thu th·∫≠p d·ªØ li·ªáu Zalo Web</title>
    <link rel="icon" type="image/x-icon" href="./Static/Favicon.svg" />
    <link rel="shortcut icon" href="./Static/Favicon.svg" />
    <style>
      * {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
        font-family: "Lexend", sans-serif;
      }
      /* Reset and base styles for SPA */
      body {
        overflow: hidden;
      }
      /* Hide old container */
      .container {
        display: none !important;
      }
      /* Ensure CrawlerApp takes full viewport */
      .CrawlerApp {
        width: 100vw;
        position: relative;
        overflow: hidden;
        height: 100vh;
      }
    </style>
    <link rel="stylesheet" href="Electron_Styles/electron.css" />
  </head>
  <body>
    <nav class="window-app-navbar">
      <div class="right-top-bar">
        <button
          id="MinimizeButton"
          style="background-image: url(./src/Assets/Minimize_White_24px.svg)"
        ></button>
        <button
          id="FullScreenButton"
          style="background-image: url(./src/Assets/Fullscreen_White_24px.svg)"
        ></button>
        <button
          id="CloseButton"
          style="background-image: url(./src/Assets/Close_White_24px.svg)"
        ></button>
      </div>
    </nav>
    <div class="CrawlerApp"></div>

    <!-- Core SPA Framework -->
    <script src="src/core/Component.js"></script>
    <script src="src/core/Router.js"></script>
    <script src="src/core/SettingsManager.js"></script>
    <script src="src/core/WindowControls.js"></script>

    <!-- Real Components -->
    <script src="src/components/Welcome.js"></script>
    <script src="src/components/DependenceMode.js"></script>
    <script src="src/components/PairedMode.js"></script>
    <script src="src/components/Settings.js"></script>
    <script src="src/components/About.js"></script>

    <!-- Component Integration -->
    <script>
      // Rename real components to match router expectations
      class WelcomeComponent extends Welcome {}
      class DependenceModeComponent extends DependenceMode {}
      class PairedModeComponent extends PairedMode {}
      class SettingsComponent extends Settings {}
      class AboutComponent extends About {}
    </script>

    <!-- Initialize App -->
    <script src="src/core/App.js"></script>

    <!-- Start Application -->
    <script>
      // Initialize and start the application
      document.addEventListener("DOMContentLoaded", async () => {
        try {
          console.log("DOM loaded, initializing app...");

          // Create and initialize app instance
          const app = new App();
          window.app = app; // Make globally available for debugging

          // Initialize the app
          await app.init();

          console.log("App initialization complete");
        } catch (error) {
          console.error("Failed to initialize app:", error);

          // Show fallback error message
          const appContainer = document.querySelector(".CrawlerApp");
          if (appContainer) {
            appContainer.innerHTML = `
              <div style="
                display: flex;
                flex-direction: column;
                justify-content: center;
                align-items: center;
                height: 100vh;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                font-family: 'Lexend', sans-serif;
                text-align: center;
                padding: 2rem;
              ">
                <h1>‚ö†Ô∏è L·ªói kh·ªüi t·∫°o ·ª©ng d·ª•ng</h1>
                <p>Kh√¥ng th·ªÉ kh·ªüi t·∫°o Zalo Crawler. Vui l√≤ng th·ª≠ l·∫°i.</p>
                <p style="font-size: 0.9rem; opacity: 0.8; margin-top: 1rem;">
                  Error: ${error.message}
                </p>
                <button onclick="location.reload()" style="
                  margin-top: 2rem;
                  padding: 1rem 2rem;
                  background: rgba(255,255,255,0.2);
                  border: 1px solid rgba(255,255,255,0.3);
                  border-radius: 8px;
                  color: white;
                  cursor: pointer;
                  font-family: inherit;
                ">
                  üîÑ T·∫£i l·∫°i ·ª©ng d·ª•ng
                </button>
              </div>
            `;
          }
        }
      });
    </script>
  </body>
</html>
